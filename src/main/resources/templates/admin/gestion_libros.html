<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Gestión de Libros</title>

	<!-- Bootstrap & FontAwesome -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

	<!-- DataTables CSS -->
	<link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css">

	<!-- CSS propio -->
	<link rel="stylesheet" th:href="@{/estilos/gestion_libros.css}">
</head>

<body class="bg-light">

	<!-- Navbar -->
	<div th:replace="menu :: navbar"></div>

	<!-- Encabezado -->
	<section class="container text-center my-5">
		<h2 class="fw-bold text-primary mb-3">
			<i class="fas fa-book me-2"></i> Gestión de Libros
		</h2>
		<p class="lead text-muted mb-0">Administra los libros registrados en la plataforma</p>
	</section>

	<!-- Contenido principal -->
	<section class="container mb-5">
		<div class="card border-0 shadow-lg rounded-4">
			<div class="card-body p-4">

				<!-- Botón agregar libro -->
				<div class="mb-4 text-end">
					<a href="/admin/libros/nuevo" class="btn btn-success shadow-sm">
						<i class="fas fa-plus me-1"></i> Agregar Libro
					</a>
				</div>

				<!-- Tabla de libros -->
				<div class="table-responsive">
					<table id="tablaLibros" class="table table-hover align-middle text-center">
						<thead>
							<tr>
								<th>ID</th>
								<th>Imagen</th>
								<th>Título</th>
								<th>Autor</th>
								<th>Precio</th>
								<th>Stock</th>
								<th>Acciones</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="libro : ${libros}">
								<td th:text="${libro.id}" class="fw-semibold"></td>
								<td>
									<img th:src="@{/img/{img}(img=${libro.imagen})}" alt="Imagen libro" class="img-thumbnail"
										style="max-width: 100px; max-height: 150px;">
								</td>
								<td th:text="${libro.titulo}"></td>
								<td th:text="${libro.autor}"></td>
								<td th:text="'S/' + ${libro.precio}"></td>
								<td th:text="${libro.stock}"></td>
								<td>
									<a th:href="@{/admin/libros/{id}/editar(id=${libro.id})}"
										class="btn btn-warning btn-sm me-1" title="Editar">
										<i class="fas fa-pencil-alt"></i>
									</a>
									<a th:href="@{/admin/libros/{id}/eliminar(id=${libro.id})}"
										class="btn btn-danger btn-sm" title="Eliminar">
										<i class="fas fa-trash"></i>
									</a>
								</td>
							</tr>
						</tbody>
					</table>
				</div>

				<!-- Si no hay libros -->
				<div th:if="${#lists.isEmpty(libros)}" class="alert alert-warning text-center mt-4 shadow-sm">
					<i class="fas fa-exclamation-circle me-2"></i> No se encontraron libros.
				</div>

			</div>
		</div>
	</section>

	<!-- Footer -->
	<div th:replace="footer :: footer"></div>

	<!-- Scripts -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>

	<!-- Inicialización DataTables -->
	<script>
		$(document).ready(function () {
			$('#tablaLibros').DataTable({
				"pageLength": 10,
				"lengthChange": false,
				"language": {
					"url": "//cdn.datatables.net/plug-ins/1.13.7/i18n/es-ES.json"
				}
			});
		});
	</script>
</body>

</html>
